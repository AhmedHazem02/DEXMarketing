# ุฎุทุฉ ุชุทููุฑ ูุธุงู ุงูุญุณุงุจุงุช ูุงูุฎุฒููุฉ - Treasury Enhancement Plan

> **ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 15 ูุจุฑุงูุฑ 2026  
> **ุงูุญุงูุฉ:** ูุฎุทุท ููุชูููุฐ  
> **ุงูุฃููููุฉ:** ุนุงููุฉ

---

## ๐ ููุฎุต ุงููุชุทูุจุงุช

| # | ุงููุชุทูุจ | ุงูุฃููููุฉ | ุงูุชุนููุฏ |
|---|---------|----------|---------|
| 1 | ุตูุงุญูุงุช ุงููุญุงุณุจ (Create & View ููุท) | ๐ด ุนุงููุฉ | ูุชูุณุท |
| 2 | ุตูุญุฉ Logs ููุฃุฏูู (ุณุฌู ุงูุนูููุงุช) | ๐ด ุนุงููุฉ | ุนุงูู |
| 3 | ููุงุชุฑ ุนุงูุฉ (ุนููุงุก + ุชุงุฑูุฎ) ูู ูู ุตูุญุฉ ุฎุงุตู ุจุงุงูุญุณุงุจุงุช ุงุฐุง ูุงู ูู ุนููุงุก ุงุนูู ูุฏุง ูุง ูููุด ุงูุชูู ููุท ุจุงูุชุงุฑูุฎ  ูู ุงูู  | ๐ก ูุชูุณุทุฉ | ูุชูุณุท |
| 4 | ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููู (ุจููุงููุฉ ุงูุฃุฏูู) | ๐ด ุนุงููุฉ | ุนุงูู |
| 5 | ุชุตูููุงุช ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช ุงูุฌุฏูุฏุฉ | ๐ข ููุฎูุถุฉ | ููุฎูุถ |
| 6 | ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููุงุก (Client Accounts) | ๐ด ุนุงููุฉ | ุนุงูู |
| 7 | ูุธุงู ุงูุจุงูุงุช (Packages CRUD) | ๐ก ูุชูุณุทุฉ | ูุชูุณุท |
| 8 | ูุธุงู ุงูููุงููุฉ + ุฅุดุนุงุฑ ุงูุนููู | ๐ด ุนุงููุฉ | ุนุงูู |

---

## ๐ ุชุญููู ุงููุถุน ุงูุญุงูู

### ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ
```
treasury          โ ุฑุตูุฏ ูุงุญุฏ (current_balance)
transactions      โ id, type, amount, description, category, client_id, project_id, created_by, created_at
clients           โ id, user_id, name, email, phone, company, notes
activity_log      โ id, user_id, action, details (JSON), ip_address, created_at
```

### RLS ุงูุญุงูู
- โ `is_accountant_or_admin()` โ SELECT ุนูู treasury ู transactions
- โ INSERT policy ูููุญุงุณุจ ูุงูุฃุฏูู
- โ **ูุง ููุฌุฏ** UPDATE policy ุนูู transactions
- โ **ูุง ููุฌุฏ** DELETE policy ุนูู transactions (ูุนูู ุงูุญุฐู ููููุน ูุนููุงู ุนูู ูุณุชูู ุงูู DB)
- โ ูุง ููุฌุฏ ุญูู `approved` ุฃู `visible_to_client` ุนูู transactions

### ุงููููุจูููุชุงุช ุงูุญุงููุฉ
- `TransactionForm` โ ููุฑู ุฅูุดุงุก (income/expense) ูุน categories ุนุงูุฉ
- `TransactionsTable` โ ุฌุฏูู ูุน ููุงุชุฑ (type, category, dates, amounts) + export CSV/PDF
- `TreasuryStats` โ 3 ุจุทุงูุงุช (ุงูุฑุตูุฏุ ุฅูุฑุงุฏุงุช ุงูุดูุฑุ ูุตุฑููุงุช ุงูุดูุฑ)
- `TreasuryPageClient` โ ูุฌูุน ูู ูุง ุณุจู

### ุงููุดุงูู ูุงููุฌูุงุช
1. ุงููุญุงุณุจ ูููู ููุณ ุงููุงุฌูุฉ ุจุงูุถุจุท ูุซู ุงูุฃุฏูู (ูุฑู ุฒุฑ ุญุฐู)
2. ูุง ููุฌุฏ ูุธุงู Logs ูุฎุตุต ููุนูููุงุช ุงููุงููุฉ
3. Categories ุซุงุจุชุฉ ูุนุงูุฉ (General, Project, Salary, Equipment, Marketing, Software)
4. ูุง ููุฌุฏ ุฑุจุท ุจูู ุงูุนููู ูุงูุจุงูุงุช
5. ูุง ููุฌุฏ ุญูู ููุงููุฉ ุนูู ุงููุนุงููุงุช
6. ุงูุนููู ูุง ูุฑู ุฃู ุดูุก ูุงูู

---

## ๐๏ธ ุงูุฎุทุฉ ุงูุชูุตูููุฉ

---

### ุงููุฑุญูุฉ 1: ุชุนุฏููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Migration)

#### 1.1 ุฌุฏูู ุฌุฏูุฏ: `treasury_logs` (ุณุฌู ุงูุนูููุงุช ุงููุงููุฉ)
```sql
CREATE TABLE public.treasury_logs (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    transaction_id UUID REFERENCES public.transactions(id) ON DELETE SET NULL,
    action TEXT NOT NULL,  -- 'create' | 'update' | 'delete' | 'approve' | 'reject'
    performed_by UUID REFERENCES public.users(id) NOT NULL,
    client_id UUID REFERENCES public.clients(id) ON DELETE SET NULL,
    client_name TEXT,
    amount DECIMAL(12,2),
    transaction_type TEXT, -- 'income' | 'expense'
    category TEXT,
    description TEXT,
    changes JSONB,  -- ููุชุนุฏููุงุช: {field: {old: x, new: y}}
    created_at TIMESTAMPTZ DEFAULT now() NOT NULL
);

CREATE INDEX idx_treasury_logs_created_at ON public.treasury_logs(created_at DESC);
CREATE INDEX idx_treasury_logs_client_id ON public.treasury_logs(client_id);
CREATE INDEX idx_treasury_logs_performed_by ON public.treasury_logs(performed_by);
```

#### 1.2 ุฌุฏูู ุฌุฏูุฏ: `packages` (ุงูุจุงูุงุช)
```sql
CREATE TABLE public.packages (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    name TEXT NOT NULL,
    name_ar TEXT,
    price DECIMAL(12,2) NOT NULL,
    duration_days INTEGER NOT NULL,  -- ุงููุฏุฉ ุจุงูุฃูุงู
    description TEXT,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMPTZ DEFAULT now() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT now() NOT NULL
);
```

#### 1.3 ุฌุฏูู ุฌุฏูุฏ: `client_accounts` (ุญุณุงุจุงุช ุงูุนููุงุก)
```sql
CREATE TABLE public.client_accounts (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    client_id UUID REFERENCES public.clients(id) ON DELETE CASCADE NOT NULL,
    package_id UUID REFERENCES public.packages(id) ON DELETE SET NULL,
    package_name TEXT,       -- ูุณุฎุฉ ูู ุงุณู ุงูุจุงูุฉ ููุช ุงูุฅูุดุงุก
    package_price DECIMAL(12,2),
    remaining_balance DECIMAL(12,2) DEFAULT 0,
    start_date DATE DEFAULT CURRENT_DATE,
    end_date DATE,
    is_active BOOLEAN DEFAULT true,
    created_by UUID REFERENCES public.users(id),
    created_at TIMESTAMPTZ DEFAULT now() NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT now() NOT NULL,
    -- ููุงุญุธุฉ: ูุง ููุฌุฏ UNIQUE ุนูู client_id โ ุงูุนููู ููุฏุฑ ูุดุชุฑู ูู ุฃูุชุฑ ูู ุจุงูุฉ
);
```

#### 1.4 ุชุนุฏูู ุฌุฏูู `transactions`
```sql
-- ุฅุถุงูุฉ ุฃุนูุฏุฉ ุฌุฏูุฏุฉ
ALTER TABLE public.transactions
    ADD COLUMN sub_category TEXT,           -- ุงูุชุตููู ุงููุฑุนู (printing, company, social)
    ADD COLUMN is_approved BOOLEAN DEFAULT false,  -- ูู ูุงูู ุงูุฃุฏูู
    ADD COLUMN approved_by UUID REFERENCES public.users(id),
    ADD COLUMN approved_at TIMESTAMPTZ,
    ADD COLUMN visible_to_client BOOLEAN DEFAULT false,  -- ูู ูุธูุฑ ููุนููู
    ADD COLUMN client_account_id UUID REFERENCES public.client_accounts(id) ON DELETE SET NULL,
    ADD COLUMN notes TEXT;

-- Index ููุจุญุซ
CREATE INDEX idx_transactions_client_id ON public.transactions(client_id);
CREATE INDEX idx_transactions_is_approved ON public.transactions(is_approved);
CREATE INDEX idx_transactions_visible_to_client ON public.transactions(visible_to_client);
```

#### 1.5 RLS Policies ุงูุฌุฏูุฏุฉ
```sql
-- ุงูุณูุงุญ ููุฃุฏูู ููุท ุจุงูุชุนุฏูู ูุงูุญุฐู ุนูู transactions
CREATE POLICY "Only admin can update transactions" ON public.transactions
    FOR UPDATE USING (
        EXISTS (SELECT 1 FROM public.users WHERE id = auth.uid() AND role = 'admin')
    );

CREATE POLICY "Only admin can delete transactions" ON public.transactions
    FOR DELETE USING (
        EXISTS (SELECT 1 FROM public.users WHERE id = auth.uid() AND role = 'admin')
    );

-- ุงูุนููู ูุฑู ููุท ุงููุนุงููุงุช ุงููุนุชูุฏุฉ ุงูุฎุงุตุฉ ุจู
CREATE POLICY "Client can view approved transactions" ON public.transactions
    FOR SELECT USING (
        public.is_accountant_or_admin()
        OR (
            visible_to_client = true
            AND client_id IN (
                SELECT id FROM public.clients WHERE user_id = auth.uid()
            )
        )
    );

-- Treasury logs - ุงูุฃุฏูู ููุท ูุดูู
CREATE POLICY "Only admin can view treasury logs" ON public.treasury_logs
    FOR SELECT USING (
        EXISTS (SELECT 1 FROM public.users WHERE id = auth.uid() AND role = 'admin')
    );

-- ุงูุฃุฏูู ูุงููุญุงุณุจ ููุฏุฑูุง ูุถูููุง logs
CREATE POLICY "Admin and accountant can insert logs" ON public.treasury_logs
    FOR INSERT WITH CHECK (public.is_accountant_or_admin());

-- Packages - ุงูุฃุฏูู ููุท CRUDุ ุงูุจุงูู SELECT
CREATE POLICY "Anyone can view packages" ON public.packages
    FOR SELECT USING (true);

CREATE POLICY "Only admin can manage packages" ON public.packages
    FOR ALL USING (
        EXISTS (SELECT 1 FROM public.users WHERE id = auth.uid() AND role = 'admin')
    );

-- Client Accounts
CREATE POLICY "Admin and accountant can view client accounts" ON public.client_accounts
    FOR SELECT USING (
        public.is_accountant_or_admin()
        OR EXISTS (
            SELECT 1 FROM public.clients 
            WHERE clients.id = client_accounts.client_id 
            AND clients.user_id = auth.uid()
        )
    );

CREATE POLICY "Admin and accountant can manage client accounts" ON public.client_accounts
    FOR INSERT WITH CHECK (public.is_accountant_or_admin());

CREATE POLICY "Only admin can update client accounts" ON public.client_accounts
    FOR UPDATE USING (
        EXISTS (SELECT 1 FROM public.users WHERE id = auth.uid() AND role = 'admin')
    );
```

#### 1.6 Trigger ุชููุงุฆู ูุชุณุฌูู ุงูุนูููุงุช
```sql
CREATE OR REPLACE FUNCTION public.log_transaction_changes()
RETURNS TRIGGER AS $$
DECLARE
    performer_id UUID;
    client_name_val TEXT;
BEGIN
    performer_id := auth.uid();
    
    -- ุฌูุจ ุงุณู ุงูุนููู
    IF NEW.client_id IS NOT NULL THEN
        SELECT name INTO client_name_val FROM public.clients WHERE id = NEW.client_id;
    END IF;

    IF TG_OP = 'INSERT' THEN
        INSERT INTO public.treasury_logs (
            transaction_id, action, performed_by, client_id, client_name,
            amount, transaction_type, category, description
        ) VALUES (
            NEW.id, 'create', performer_id, NEW.client_id, client_name_val,
            NEW.amount, NEW.type::text, NEW.category, NEW.description
        );
    ELSIF TG_OP = 'UPDATE' THEN
        INSERT INTO public.treasury_logs (
            transaction_id, action, performed_by, client_id, client_name,
            amount, transaction_type, category, description, changes
        ) VALUES (
            NEW.id, 
            CASE WHEN NEW.is_approved = true AND OLD.is_approved = false THEN 'approve' ELSE 'update' END,
            performer_id, NEW.client_id, client_name_val,
            NEW.amount, NEW.type::text, NEW.category, NEW.description,
            jsonb_build_object(
                'amount', jsonb_build_object('old', OLD.amount, 'new', NEW.amount),
                'type', jsonb_build_object('old', OLD.type, 'new', NEW.type),
                'category', jsonb_build_object('old', OLD.category, 'new', NEW.category),
                'is_approved', jsonb_build_object('old', OLD.is_approved, 'new', NEW.is_approved)
            )
        );
    ELSIF TG_OP = 'DELETE' THEN
        INSERT INTO public.treasury_logs (
            transaction_id, action, performed_by, client_id, client_name,
            amount, transaction_type, category, description
        ) VALUES (
            OLD.id, 'delete', performer_id, OLD.client_id, client_name_val,
            OLD.amount, OLD.type::text, OLD.category, OLD.description
        );
        RETURN OLD;
    END IF;
    
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_transaction_change
    AFTER INSERT OR UPDATE OR DELETE ON public.transactions
    FOR EACH ROW EXECUTE PROCEDURE public.log_transaction_changes();
```

#### 1.7 Trigger ุชุญุฏูุซ ุฑุตูุฏ ุญุณุงุจ ุงูุนููู
```sql
CREATE OR REPLACE FUNCTION public.update_client_account_balance()
RETURNS TRIGGER AS $$
BEGIN
    -- ููุง ุงููุนุงููุฉ ุชุชุนุชูุฏ ูุชููู ูุฑุชุจุทุฉ ุจุญุณุงุจ ุนูููุ ูููุต ูู ุงูุฑุตูุฏ
    IF NEW.is_approved = true AND OLD.is_approved = false 
       AND NEW.client_account_id IS NOT NULL THEN
        UPDATE public.client_accounts 
        SET remaining_balance = remaining_balance - NEW.amount,
            updated_at = now()
        WHERE id = NEW.client_account_id;
    END IF;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_transaction_approved
    AFTER UPDATE ON public.transactions
    FOR EACH ROW EXECUTE PROCEDURE public.update_client_account_balance();
```

---

### ุงููุฑุญูุฉ 2: ุตูุงุญูุงุช ุงููุญุงุณุจ (Accountant Permissions)

#### ูุง ููุฏุฑ ูุนููู ุงููุญุงุณุจ:
| ุงูุนูููุฉ | ูุณููุญุ |
|---------|--------|
| ุฅูุดุงุก ูุนุงููุฉ | โ |
| ุนุฑุถ ุงููุนุงููุงุช | โ |
| ุชุนุฏูู ูุนุงููุฉ | โ |
| ุญุฐู ูุนุงููุฉ | โ |
| ุชุนุฏูู ุชุงุฑูุฎ ุงููุนุงููุฉ | โ (ุงูุชุงุฑูุฎ ูุชุณุฌู ุชููุงุฆู ูู ุงูุณูุฑูุฑ) |
| ุงูููุงููุฉ ุนูู ูุนุงููุฉ | โ |
| ุฅูุดุงุก ุญุณุงุจ ุนููู | โ |
| ุฅุถุงูุฉ ูุนุงููุฉ ูุญุณุงุจ ุนููู | โ |

#### ุงูุชุบููุฑุงุช ุงููุทููุจุฉ:

**ููู:** `src/components/treasury/transactions-table.tsx`
- ุฅุฎูุงุก ุฒุฑ ุงูุญุฐู ุนู ุงููุญุงุณุจ
- ุฅุฎูุงุก ุฒุฑ ุงูุชุนุฏูู ุนู ุงููุญุงุณุจ
- ุฅุธูุงุฑ ุฒุฑ ุงูููุงููุฉ ููุฃุฏูู ููุท

**ููู:** `src/components/treasury/transaction-form.tsx`
- ุฅุจูุงุก ุงูููุฑู ููุง ูู (create ููุท) โ
- **ุงููุญุงุณุจ**: ูุง ููุฌุฏ ุญูู ุชุงุฑูุฎ ูู ุงูููุฑู โ ุงูุชุงุฑูุฎ ูุชุณุฌู ุชููุงุฆูุงู ูู ุงูุณูุฑูุฑ (`created_at DEFAULT now()`)
- **ุงูุฃุฏูู**: ุนูุฏ ุงูุชุนุฏูู ููุท ูุธูุฑ ุญูู ุงูุชุงุฑูุฎ ูููุฏุฑ ูุบูุฑู
- ููุฑู ุฅุถุงูุฉ ุนููู: ููุณ ุงููุงุนุฏุฉ โ ุงููุญุงุณุจ ูุง ููุฏุฑุด ูุญุฏุฏ ุชุงุฑูุฎ

> โ๏ธ **ูุงุนุฏุฉ ูููุฉ:** ุฃู ููุฑู ุฅูุดุงุก (ุณูุงุก ูุนุงููุฉ ุฃู ุญุณุงุจ ุนููู) ุงูุชุงุฑูุฎ ูููุง `DEFAULT now()` ูู ุงูุณูุฑูุฑ.
> ููุท ุงูุฃุฏูู ูู ูุถุน ุงูุชุนุฏูู (Edit) ููุฏุฑ ูุนุฏูู ุงูุชุงุฑูุฎ.

**ููู ุฌุฏูุฏ:** `src/hooks/use-current-role.ts`
- Hook ุจุณูุท ูุฑุฌุน role ุงููุณุชุฎุฏู ุงูุญุงูู ูุงุณุชุฎุฏุงูู ูู ุงูุชุญูู ุจุงูุนุฑุถ

---

### ุงููุฑุญูุฉ 3: ุตูุญุฉ Logs ููุฃุฏูู

#### ุงููููุน: `/admin/treasury/logs`

#### ุงูุชุตููู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ุณุฌู ุงูุนูููุงุช ุงููุงููุฉ                             โ
โ  Transaction Activity Log                            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ๐ ุจุญุซ ุจุงูุนููู    โ ๐ ูู ุชุงุฑูุฎ โ ๐ ุฅูู ุชุงุฑูุฎ    โ
โ  [____________]     โ [________] โ [________]        โ
โ                                                      โ
โ  ููุน ุงูุนูููุฉ: [ุงููู โพ]    ุงููุฆุฉ: [ุงููู โพ]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงูุนูููุฉ โ ุงููุณุชุฎุฏู โ ุงูุนููู โ ุงููุจูุบ โ ุงูููุช โ ุชูุงุตููโ
โโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโผโโโโโโโโโผโโโโโโโโผโโโโโโโโ
โ โ ุฅูุดุงุก โ ุฃุญูุฏ    โ ุดุฑูุฉ X โ 5,000  โ 10:30 โ ๐    โ
โ โ๏ธ ุชุนุฏูู โ ูุญูุฏ    โ ุดุฑูุฉ Y โ 3,000  โ 11:00 โ ๐    โ
โ ๐๏ธ ุญุฐู  โ ุฃุญูุฏ    โ ุดุฑูุฉ Z โ 1,000  โ 12:15 โ ๐    โ
โ โ ููุงููุฉโ ุฃุญูุฏ    โ ุดุฑูุฉ X โ 5,000  โ 14:00 โ ๐    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงููููุงุช ุงููุทููุจุฉ:
1. `src/components/treasury/treasury-logs.tsx` โ ุงููููุจูููุช ุงูุฑุฆูุณู
2. `src/hooks/use-treasury-logs.ts` โ Hook ูุฌูุจ ุงูู Logs
3. `src/app/[locale]/(dashboard)/admin/treasury/logs/page.tsx` โ ุงูุตูุญุฉ

#### ุงูููุงุชุฑ:
- **ุจุญุซ ุจุงูุนููู**: Input ูุน debounce ูุจุญุซ ูู `client_name`
- **ููุน ุงูุนูููุฉ**: Dropdown (ุงููู / ุฅูุดุงุก / ุชุนุฏูู / ุญุฐู / ููุงููุฉ)
- **ุงูุชุงุฑูุฎ**: ูู - ุฅูู (Calendar picker)
- **ุงููุณุชุฎุฏู**: Dropdown ุจุฃุณูุงุก ุงููุญุงุณุจูู ูุงูุฃุฏูู

---

### ุงููุฑุญูุฉ 4: ุชุตูููุงุช ุงููุตุฑููุงุช ูุงูุฅูุฑุงุฏุงุช

#### ุงูุชุตูููุงุช ุงูุฌุฏูุฏุฉ:

| ุงูููุน | ุงูุชุตููู ุงูุฑุฆูุณู | ุงูุชุตููู ุงููุฑุนู |
|-------|----------------|----------------|
| **ูุตุฑููุงุช** (expense) | ุทุจุงุนุฉ (Printing) | โ |
| **ูุตุฑููุงุช** (expense) | ุดุฑูุฉ (Company) | โ |
| **ูุตุฑููุงุช** (expense) | ุณูุดูุงู (Social) | โ |
| **ุฅูุฑุงุฏุงุช** (income) | ูุทุจูุนุงุช (Printed) | โ |
| **ุฅูุฑุงุฏุงุช** (income) | ุณูุดูุงู (Social) | โ |

#### ุงูุชุบููุฑุงุช:
**ููู:** `src/components/treasury/transaction-form.tsx`
- ุชุบููุฑ ุงูู categories ูุชููู ุฏููุงููููุฉ ุญุณุจ ุงูููุน (income/expense)
- ุนูุฏ ุงุฎุชูุงุฑ `expense` โ ุชุธูุฑ: ุทุจุงุนุฉุ ุดุฑูุฉุ ุณูุดูุงู
- ุนูุฏ ุงุฎุชูุงุฑ `income` โ ุชุธูุฑ: ูุทุจูุนุงุชุ ุณูุดูุงู

**ููู ุฌุฏูุฏ:** `src/lib/constants/treasury.ts`
```typescript
export const EXPENSE_CATEGORIES = [
    { value: 'printing', label_en: 'Printing', label_ar: 'ุทุจุงุนุฉ' },
    { value: 'company', label_en: 'Company', label_ar: 'ุดุฑูุฉ' },
    { value: 'social', label_en: 'Social Media', label_ar: 'ุณูุดูุงู ููุฏูุง' },
]

export const INCOME_CATEGORIES = [
    { value: 'printed', label_en: 'Printed Materials', label_ar: 'ูุทุจูุนุงุช' },
    { value: 'social', label_en: 'Social Media', label_ar: 'ุณูุดูุงู ููุฏูุง' },
]
```

---

### ุงููุฑุญูุฉ 5: ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููุงุก (Client Accounts)

#### ุงููููุน: `/admin/treasury/client-accounts` + `/accountant/client-accounts`

#### ุงูุชุตููู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฅ ุญุณุงุจุงุช ุงูุนููุงุก                    [+ ุฅุถุงูุฉ ุนููู]    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ ๐ ุจุญุซ ุจุงูุนููู [___________________]            โ    โ
โ  โ ๐ ูู ุชุงุฑูุฎ [________] ๐ ุฅูู ุชุงุฑูุฎ [________]  โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                          โ
โ  โโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโ   โ
โ  โ ุงูุนููู   โ ุงูุจุงูุฉ  โ ุงูุณุนุฑ    โ ุงูุจุงูู  โ ุฅุฌุฑุงุก  โ   โ
โ  โโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโค   โ
โ  โ ุดุฑูุฉ ABC โ ุฐูุจูุฉ   โ 10,000   โ 7,500   โ [+] ๐ โ   โ
โ  โ ุดุฑูุฉ XYZ โ ูุถูุฉ    โ 5,000    โ 2,000   โ [+] ๐ โ   โ
โ  โโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโดโโโโโโโโโ   โ
โ                                                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ููุฑู ุฅุถุงูุฉ ุนููู:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฅุถุงูุฉ ุญุณุงุจ ุนููู                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงูุนููู: [๐ ุจุญุซ ูุงุฎุชูุงุฑ ูู ุงููุงุฆูุฉ โพ]โ
โ  ุงูุจุงูุฉ: [ุงุฎุชุฑ ุงูุจุงูุฉ โพ]             โ
โ                                      โ
โ  ุณุนุฑ ุงูุจุงูุฉ: 10,000 ุฌ.ู             โ
โ  ุงููุฏุฉ: 30 ููู                       โ
โ                                      โ
โ          [ุญูุธ]     [ุฅูุบุงุก]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ููุฑู ุฅุถุงูุฉ ูุนุงููุฉ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฅุถุงูุฉ ูุนุงููุฉ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงูุนููู: [๐ ุจุญุซ ูุงุฎุชูุงุฑ โพ]          โ
โ  ุงูุชุงุฑูุฎ: ๐ ุชููุงุฆู ูู ุงูุณูุฑูุฑ       โ
โ  (โ๏ธ ุงููุญุงุณุจ ูุง ููุฏุฑ ูุบูุฑ ุงูุชุงุฑูุฎ)  โ
โ  ุงูููุน: [ุฅูุฑุงุฏ โ | ูุตุฑูู โ]         โ
โ  ุงููุจูุบ: [____________]              โ
โ  ุงููุฆุฉ: [ุงุฎุชุฑ ุงููุฆุฉ โพ]               โ
โ  ุงููุตู: [____________]               โ
โ                                      โ
โ          [ุญูุธ]     [ุฅูุบุงุก]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ููุฑู ุชุนุฏูู ูุนุงููุฉ (ุฃุฏูู ููุท):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุนุฏูู ูุนุงููุฉ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงูุนููู: [๐ ุจุญุซ ูุงุฎุชูุงุฑ โพ]          โ
โ  ุงูุชุงุฑูุฎ: [๐ ุงุฎุชุฑ ุงูุชุงุฑูุฎ]  โ ุฃุฏูู  โ
โ  ุงูููุน: [ุฅูุฑุงุฏ โ | ูุตุฑูู โ]         โ
โ  ุงููุจูุบ: [____________]              โ
โ  ุงููุฆุฉ: [ุงุฎุชุฑ ุงููุฆุฉ โพ]               โ
โ  ุงููุตู: [____________]               โ
โ                                      โ
โ          [ุญูุธ]     [ุฅูุบุงุก]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงููููุงุช ุงููุทููุจุฉ:
1. `src/components/treasury/client-accounts-page.tsx` โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
2. `src/components/treasury/add-client-account-dialog.tsx` โ ููุฑู ุฅุถุงูุฉ ุนููู
3. `src/components/treasury/add-client-transaction-dialog.tsx` โ ููุฑู ุฅุถุงูุฉ ูุนุงููุฉ
4. `src/components/treasury/client-account-details.tsx` โ ุชูุงุตูู ุญุณุงุจ ุนููู
5. `src/hooks/use-client-accounts.ts` โ Hooks ูุญุณุงุจุงุช ุงูุนููุงุก
6. `src/hooks/use-packages.ts` โ Hooks ููุจุงูุงุช
7. `src/app/[locale]/(dashboard)/admin/treasury/client-accounts/page.tsx`
8. `src/app/[locale]/(dashboard)/accountant/client-accounts/page.tsx`

---

### ุงููุฑุญูุฉ 6: ูุธุงู ุงูุจุงูุงุช (Packages)

#### ุงููููุน: `/admin/treasury/packages` (ุฃุฏูู ููุท)

#### ุงูุชุตููู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฆ ุฅุฏุงุฑุฉ ุงูุจุงูุงุช                    [+ ุฅุถุงูุฉ ุจุงูุฉ]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                      โ
โ  โโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ โ
โ  โ ุงูุจุงูุฉ   โ ุงูุณุนุฑ    โ ุงููุฏุฉ    โ ุฅุฌุฑุงุกุงุช        โ โ
โ  โโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค โ
โ  โ ุฐูุจูุฉ    โ 10,000   โ 90 ููู   โ โ๏ธ ๐๏ธ          โ โ
โ  โ ูุถูุฉ     โ 5,000    โ 30 ููู   โ โ๏ธ ๐๏ธ          โ โ
โ  โ ุจุฑููุฒูุฉ  โ 2,500    โ 15 ููู   โ โ๏ธ ๐๏ธ          โ โ
โ  โโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโโโโโโโ โ
โ                                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ููุฑู ุฅุถุงูุฉ/ุชุนุฏูู ุจุงูุฉ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุฅุถุงูุฉ ุจุงูุฉ ุฌุฏูุฏุฉ                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุงุณู ุงูุจุงูุฉ (EN): [____________]    โ
โ  ุงุณู ุงูุจุงูุฉ (AR): [____________]    โ
โ  ุงูุณุนุฑ: [____________]              โ
โ  ุงููุฏุฉ (ุจุงูุฃูุงู): [____________]    โ
โ  ุงููุตู: [____________]              โ
โ                                      โ
โ          [ุญูุธ]     [ุฅูุบุงุก]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงููููุงุช ุงููุทููุจุฉ:
1. `src/components/treasury/packages-manager.tsx` โ ุฅุฏุงุฑุฉ ุงูุจุงูุงุช
2. `src/components/treasury/package-form-dialog.tsx` โ ููุฑู ุฅุถุงูุฉ/ุชุนุฏูู
3. `src/app/[locale]/(dashboard)/admin/treasury/packages/page.tsx`

---

### ุงููุฑุญูุฉ 7: ูุธุงู ุงูููุงููุฉ ูุงูุนุฑุถ ููุนููู

#### ุงูุขููุฉ:
```
ุงููุญุงุณุจ ูุถูู ูุนุงููุฉ (is_approved = false)
         โ
ุชุธูุฑ ูู ุตูุญุฉ ุงูุฃุฏูู (Logs) ููุนุงููุฉ ุฌุฏูุฏุฉ
         โ
ุงูุฃุฏูู ููุงูู โ is_approved = true, visible_to_client = true
         โ
ุฅุดุนุงุฑ ููุตู ููุนููู (ุฌุฏูู notifications)
         โ
ุงูุนููู ูุดูู ุงููุนุงููุฉ ูู ุตูุญุชู ูุน ุงูุฑุตูุฏ ุงููุชุจูู
```

#### ุตูุญุฉ ุงูุนููู: `/client/account`

> **ุงูุนููู ููุฏุฑ ูุดุชุฑู ูู ุฃูุชุฑ ูู ุจุงูุฉ.** ูู ุนูุฏู ุฃูุชุฑ ูู ุจุงูุฉ ูุนูุงูุฉุ ูุธูุฑ Dropdown ูู ุฃุนูู ุงูุตูุญุฉ ูุงุฎุชูุงุฑ ุงูุจุงูุฉ ุงููุฑุงุฏ ุนุฑุถ ุชูุงุตูููุง. ูู ุนูุฏู ุจุงูุฉ ูุงุญุฏุฉ ุจุณ โ ูุง ูุธูุฑุด ุงูู Dropdown ุฎุงูุต.

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฐ ุญุณุงุจู ุงููุงูู                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ      โ
โ  โ ๐ฆ ุงูุจุงูุฉ: [ุฐูุจูุฉ โพ]  โ Dropdown ูุธูุฑ ููุท    โ      โ
โ  โ                         ูู ุฃูุชุฑ ูู ุจุงูุฉ       โ      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ      โ
โ                                                          โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ
โ  โ ุงูุจุงูุฉ      โ  โ ุงููุณุชุฎุฏูู   โ  โ ุงููุชุจูู     โ     โ
โ  โ ุฐูุจูุฉ       โ  โ 2,500 ุฌ.ู   โ  โ 7,500 ุฌ.ู   โ     โ
โ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโ     โ
โ                                                          โ
โ  ุขุฎุฑ ุงููุนุงููุงุช (ููุจุงูุฉ ุงููุฎุชุงุฑุฉ)                         โ
โ  โโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ  โ
โ  โ ุงูุชุงุฑูุฎ  โ ุงููุตู    โ ุงููุจูุบ   โ ุงูููุน            โ  โ
โ  โโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโค  โ
โ  โ 15/02    โ ุชุตููู    โ -500     โ ูุตุฑูู            โ  โ
โ  โ 14/02    โ ุทุจุงุนุฉ    โ -1,000   โ ูุตุฑูู            โ  โ
โ  โ 10/02    โ ุฏูุนุฉ     โ +10,000  โ ุฅูุฑุงุฏ (ุงูุจุงูุฉ)   โ  โ
โ  โโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงููููุงุช ุงููุทููุจุฉ:
1. `src/components/client/client-account-page.tsx` โ ุตูุญุฉ ุญุณุงุจ ุงูุนููู
2. `src/components/treasury/approve-transaction-dialog.tsx` โ ุฏูุงููุฌ ุงูููุงููุฉ
3. `src/app/[locale]/(dashboard)/client/account/page.tsx`

---

### ุงููุฑุญูุฉ 8: ุชุญุฏูุซ ุงูู Routing ูุงูู Navigation

#### ุชุนุฏูู `src/lib/routes.tsx`:

```typescript
// Admin routes - ุฅุถุงูุฉ:
{ name: t('Client Accounts', 'ุญุณุงุจุงุช ุงูุนููุงุก'), href: '/admin/treasury/client-accounts', icon: Users },
{ name: t('Packages', 'ุงูุจุงูุงุช'), href: '/admin/treasury/packages', icon: Package },
{ name: t('Activity Log', 'ุณุฌู ุงูุนูููุงุช'), href: '/admin/treasury/logs', icon: FileText },

// Accountant routes - ุฅุถุงูุฉ:
{ name: t('Client Accounts', 'ุญุณุงุจุงุช ุงูุนููุงุก'), href: '/accountant/client-accounts', icon: Users },

// Client routes - ุฅุถุงูุฉ:
{ name: t('My Account', 'ุญุณุงุจู'), href: '/client/account', icon: Wallet },
```

---

## ๐ ููุฎุต ุฌููุน ุงููููุงุช ุงููุทููุจุฉ

### ูููุงุช ุฌุฏูุฏุฉ (18 ููู):

| # | ุงููุณุงุฑ | ุงููุตู |
|---|--------|-------|
| 1 | `supabase/migration_v6_treasury_enhancement.sql` | Migration ููู ุชุนุฏููุงุช ุงูู DB |
| 2 | `src/lib/constants/treasury.ts` | ุงูุชุตูููุงุช ูุงูุซูุงุจุช |
| 3 | `src/hooks/use-treasury-logs.ts` | Hook ูุณุฌู ุงูุนูููุงุช |
| 4 | `src/hooks/use-packages.ts` | Hook ููุจุงูุงุช |
| 5 | `src/hooks/use-client-accounts.ts` | Hook ูุญุณุงุจุงุช ุงูุนููุงุก |
| 6 | `src/components/treasury/treasury-logs.tsx` | ูููุจูููุช ุณุฌู ุงูุนูููุงุช |
| 7 | `src/components/treasury/packages-manager.tsx` | ุฅุฏุงุฑุฉ ุงูุจุงูุงุช |
| 8 | `src/components/treasury/package-form-dialog.tsx` | ููุฑู ุงูุจุงูุฉ |
| 9 | `src/components/treasury/client-accounts-page.tsx` | ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููุงุก |
| 10 | `src/components/treasury/add-client-account-dialog.tsx` | ููุฑู ุฅุถุงูุฉ ุญุณุงุจ ุนููู |
| 11 | `src/components/treasury/add-client-transaction-dialog.tsx` | ููุฑู ูุนุงููุฉ ุนููู |
| 12 | `src/components/treasury/client-account-details.tsx` | ุชูุงุตูู ุญุณุงุจ ุนููู |
| 13 | `src/components/treasury/approve-transaction-dialog.tsx` | ุฏูุงููุฌ ุงูููุงููุฉ |
| 14 | `src/components/client/client-account-page.tsx` | ุตูุญุฉ ุญุณุงุจ ุงูุนููู |
| 15 | `src/app/[locale]/(dashboard)/admin/treasury/logs/page.tsx` | ุตูุญุฉ Logs |
| 16 | `src/app/[locale]/(dashboard)/admin/treasury/packages/page.tsx` | ุตูุญุฉ ุงูุจุงูุงุช |
| 17 | `src/app/[locale]/(dashboard)/admin/treasury/client-accounts/page.tsx` | ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููุงุก (ุฃุฏูู) |
| 18 | `src/app/[locale]/(dashboard)/accountant/client-accounts/page.tsx` | ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููุงุก (ูุญุงุณุจ) |
| 19 | `src/app/[locale]/(dashboard)/client/account/page.tsx` | ุตูุญุฉ ุญุณุงุจ ุงูุนููู |

### ูููุงุช ุชุญุชุงุฌ ุชุนุฏูู (6 ูููุงุช):

| # | ุงููุณุงุฑ | ุงูุชุนุฏูู |
|---|--------|---------|
| 1 | `src/components/treasury/transaction-form.tsx` | ุชุตูููุงุช ุฏููุงููููุฉ + ุญููู ุฌุฏูุฏุฉ + ุฅุฎูุงุก ุญูู ุงูุชุงุฑูุฎ ุนู ุงููุญุงุณุจ |
| 2 | `src/components/treasury/transactions-table.tsx` | ุฅุฎูุงุก ุฃุฒุฑุงุฑ ุญุณุจ ุงูุตูุงุญูุฉ + ุฒุฑ ุงูููุงููุฉ |
| 3 | `src/hooks/use-treasury.ts` | ุฅุถุงูุฉ hooks ุฌุฏูุฏุฉ (update, approve) |
| 4 | `src/lib/routes.tsx` | ุฅุถุงูุฉ ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ |
| 5 | `src/types/database.ts` | ุฅุถุงูุฉ ุงูู types ุงูุฌุฏูุฏุฉ |
| 6 | `src/components/treasury/index.ts` | ุชุตุฏูุฑ ุงููููุจูููุชุงุช ุงูุฌุฏูุฏุฉ |

---

## ๐ ุชุฑุชูุจ ุงูุชูููุฐ ุงูููุชุฑุญ

```
ุงูุฃุณุจูุน 1: ุงูุฃุณุงุณูุงุช
โโโ 1. Migration (ูุงุนุฏุฉ ุงูุจูุงูุงุช) โฆ ุงูุฃูู
โโโ 2. Types ุงูุฌุฏูุฏุฉ
โโโ 3. Constants (ุงูุชุตูููุงุช)
โโโ 4. ุตูุงุญูุงุช ุงููุญุงุณุจ (UI)

ุงูุฃุณุจูุน 2: ูุธุงู ุงูุจุงูุงุช + ุญุณุงุจุงุช ุงูุนููุงุก
โโโ 5. Hooks (packages, client-accounts)
โโโ 6. ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุจุงูุงุช
โโโ 7. ุตูุญุฉ ุญุณุงุจุงุช ุงูุนููุงุก
โโโ 8. ููุฑู ุฅุถุงูุฉ ุนููู + ูุนุงููุฉ

ุงูุฃุณุจูุน 3: Logs + ุงูููุงููุฉ + ุงูุนููู
โโโ 9. Hook + ุตูุญุฉ Logs
โโโ 10. ูุธุงู ุงูููุงููุฉ
โโโ 11. ุตูุญุฉ ุญุณุงุจ ุงูุนููู
โโโ 12. ุชุญุฏูุซ Navigation

ุงูุฃุณุจูุน 4: ุงูุชูุงูู ูุงูุงุฎุชุจุงุฑ
โโโ 13. ุงูุฅุดุนุงุฑุงุช
โโโ 14. ุงุฎุชุจุงุฑ ุดุงูู ููู ุงูุณููุงุฑูููุงุช
โโโ 15. ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช
โโโ 16. ูุฑุงุฌุนุฉ ููุงุฆูุฉ
```

---

## ๐ก ุชูุตูุงุชู ุงูุดุฎุตูุฉ

### 1. ุฃูุงู ุฅุถุงูู
- **ูุง ุชุนุชูุฏ ููุท ุนูู ุฅุฎูุงุก ุงูุฃุฒุฑุงุฑ ูู ุงูู UI** โ ุงูู RLS ูู Supabase ูู ุฎุท ุงูุฏูุงุน ุงูุญูููู
- ุถุน `SECURITY DEFINER` ุนูู ูู ุงูู Functions ุงูุญุณุงุณุฉ
- ุงุณุชุฎุฏู `auth.uid()` ุจุฏู ุชูุฑูุฑ ุงูู user_id ูู ุงูู frontend
- **ุงูุชุงุฑูุฎ (`created_at`)**: ูุชุณุฌู ุชููุงุฆูุงู ูู ุงูุณูุฑูุฑ ุนูุฏ ุงูุฅูุดุงุก โ ุงููุญุงุณุจ ูุง ูุณุชุทูุน ุชุบููุฑูุ ููุท ุงูุฃุฏูู ูู ูุถุน ุงูุชุนุฏูู

### 2. Audit Trail ููู
- ุงูู `treasury_logs` ูุชุณุฌู ุชููุงุฆูุงู ุจู Trigger โ ูุง ุญุฏ ููุฏุฑ ูุชูุงุนุจ ููู
- ุฎุฒูู `client_name` ูู text ูุด ุจุณ reference โ ูู ุงูุนููู ุงุชูุณุญ ุชูุถู ุงูุจูุงูุงุช ููุฌูุฏุฉ

### 3. Soft Delete
- โ ุฃูุตุญ ุจุดุฏุฉ ุจุนุฏู ุงูุญุฐู ุงูููุงุฆู ูููุนุงููุงุช โ ุงุณุชุฎุฏู `is_deleted` flag ุจุฏูุงู ูู ุฐูู
- ุงููุญุงุณุจุฉ ูุงุฒู ูููู ูููุง trail ูุงูู

### 4. ุชุตูููุงุช ูุฑูุฉ
- ูููู ูุณุชูุจูุงู ุชุญูู ุงูุชุตูููุงุช ูุฌุฏูู ูู ุงูู DB ุจุฏู constants โ ูุณููู ุงูุฅุถุงูุฉ ูู ุงูู Admin

### 5. ุงูุจุงูุงุช
- ุฎุฒูู ูุณุฎุฉ ูู ุงุณู ูุณุนุฑ ุงูุจุงูุฉ ูู `client_accounts` โ ูู ุงุชุนุฏูุช ุงูุจุงูุฉ ูุงุญูุงูุ ุญุณุงุจ ุงูุนููู ููุถู ุตุญ
- **ุงูุนููู ููุฏุฑ ูุดุชุฑู ูู ุฃูุชุฑ ูู ุจุงูุฉ** โ ูุง ููุฌุฏ UNIQUE constraint ุนูู `client_id` ูู `client_accounts`
- ูู ุตูุญุฉ ุงูุนููู: ูู ุนูุฏู ุจุงูุฉ ูุงุญุฏุฉ ุชุธูุฑ ูุจุงุดุฑุฉุ ูู ุฃูุชุฑ ูู ูุงุญุฏุฉ ูุธูุฑ Dropdown ูุงุฎุชูุงุฑ ุงูุจุงูุฉ

### 6. ุงูุฃุฏุงุก
- ุงุณุชุฎุฏู `staleTime` ููุงุณุจ โ ุงูู Logs ูุซูุงู ูููู ุชููู `staleTime: 60s`
- ุงูุฌุฏุงูู ุงููุจูุฑุฉ ุงุณุชุฎุฏู server-side pagination ุจุฏู client-side

### 7. Real-time
- ูููู ุชูุนูู Supabase Realtime ุนูู `transactions` โ ููุง ุงููุญุงุณุจ ูุถูู ูุนุงููุฉ ุชุธูุฑ ุนูุฏ ุงูุฃุฏูู ููุฑุงู

### 8. ุงูุนููุฉ
- ุญุฏุฏ ุงูุนููุฉ (ุฌ.ู ) ูู ุงูู Settings ูุฎููููุง ุฏููุงููููุฉ

---

## โ Checklist ูุจู ุงูุฅูุชุงุฌ

- [ ] ุชูููุฐ ุงูู Migration ุจูุฌุงุญ
- [ ] ุงุฎุชุจุงุฑ ุงูู RLS policies ููู role
- [ ] ุงููุญุงุณุจ ููุฏุฑ ูุถูู ููุดูู ุจุณ
- [ ] ุงููุญุงุณุจ ูุง ููุฏุฑุด ูุบูุฑ ุชุงุฑูุฎ ุงููุนุงููุฉ (server timestamp)
- [ ] ุงูุฃุฏูู ููุฏุฑ ูุนูู ูู ุญุงุฌุฉ (ุจูุง ูููุง ุชุนุฏูู ุงูุชุงุฑูุฎ)
- [ ] ุงูุนููู ูุดูู Dropdown ุงูุจุงูุงุช ูู ูุดุชุฑู ูู ุฃูุชุฑ ูู ูุงุญุฏุฉ
- [ ] ุงูุนููู ูุดูู ุจุณ ุงููุนุงููุงุช ุงููุนุชูุฏุฉ
- [ ] Logs ุจุชุชุณุฌู ุชููุงุฆูุงู
- [ ] ุงูููุงุชุฑ ุดุบุงูุฉ ูู ูู ุงูุตูุญุงุช
- [ ] ุงูุจุงูุงุช CRUD ุดุบุงู
- [ ] ุงูููุงููุฉ ุจุชุฎุตู ูู ุฑุตูุฏ ุงูุนููู
- [ ] ุงูุฅุดุนุงุฑุงุช ุจุชูุตู ููุนููู
- [ ] Export CSV/PDF ุดุบุงู ูุน ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ
- [ ] RTL (ุนุฑุจู) ุดุบุงู ูู ูู ุงูุตูุญุงุช ุงูุฌุฏูุฏุฉ
- [ ] Responsive ุนูู ุงูููุจุงูู
